"use strict";angular.module("valueMash",["ngMaterial","ngAnimate","ngCookies","ngTouch","ngSanitize","ui.router","ngStorage","toaster","angular-cache","ng-token-auth"]).config(["$httpProvider","$authProvider","$locationProvider","API_URL",function(o,t,e,a){e.html5Mode(!1),e.hashPrefix("!"),"#%21"===window.location.hash.substr(0,4)&&window.location.replace(window.location.href.split("#%21").join("#!")),o.defaults.withCredentials=!0,t.configure({apiUrl:a})}]).run(["$rootScope","Notifier","$state","ENV","API_URL",function(o,t,e,a,n){o.ENV=a,o.API_URL=n,o.$on("$stateChangeError",function(){t.show("Please log in"),e.go("layout_guest.login")})}]),angular.module("valueMash").controller("ValueCtrl",["$scope","API",function(o,t){o.values={},t.getValues().then(function(t){console.log("resp",t),o.values=t.data.values})}]),angular.module("valueMash").controller("UserCtrl",["$scope","API",function(o,t){o.users={},t.getUsers().then(function(t){console.log("resp",t),o.users=t.data.users})}]),angular.module("valueMash").controller("LoginCtrl",["$scope","API","$mdDialog",function(o,t,e){o.modalTest=function(o){e.show({controller:"changePasswordModalCtrl",templateUrl:"modules/guest/_change_password.modal.html",targetEvent:o})}}]),angular.module("valueMash").controller("LayoutGuestCtrl",["$scope","$rootScope","$state",function(o,t,e){o.$state=e,o.layoutModel={}}]),angular.module("valueMash").controller("LayoutAppCtrl",["$scope","$rootScope","$state",function(o,t,e){o.$state=e,o.layoutModel={}}]),angular.module("valueMash").controller("DashboardCtrl",["$scope",function(){}]),angular.module("valueMash").config(["$stateProvider","$urlRouterProvider",function(o,t){t.otherwise("/login"),o.state("layout_guest",{"abstract":!0,views:{root:{templateUrl:"modules/layout/layout_guest.html",controller:"LayoutGuestCtrl"}}}).state("layout_guest.login",{url:"/login",templateUrl:"modules/guest/login.html",controller:"LoginCtrl"}).state("layout_app",{"abstract":!0,views:{root:{templateUrl:"modules/layout/layout_app.html",controller:"LayoutAppCtrl"},"sidebar@layout_app":{templateUrl:"modules/layout/_layout_app_sidebar.html",controller:"LayoutAppCtrl"}},resolve:{auth:["$auth",function(o){return o.validateUser()}]}}).state("layout_app.dashboard",{url:"/dashboard",templateUrl:"modules/dashboard/dashboard.html",controller:"DashboardCtrl"}).state("layout_app.users",{url:"/users",templateUrl:"modules/user/user.html",controller:"UserCtrl"}).state("layout_app.values",{url:"/values",templateUrl:"modules/value/value.html",controller:"ValueCtrl"})}]),angular.module("valueMash").constant("ENV","production").constant("API_URL",""),angular.module("valueMash").run(["$rootScope","$mdDialog",function(o,t){o.$on("auth:registration-email-success",function(){console.log("auth:registration-email-success")}),o.$on("auth:registration-email-error",function(){console.log("auth:registration-email-error")}),o.$on("auth:email-confirmation-success",function(){console.log("auth:email-confirmation-success")}),o.$on("auth:email-confirmation-error",function(){console.log("auth:email-confirmation-error")}),o.$on("auth:password-reset-request-success",function(){console.log("auth:password-reset-request-success")}),o.$on("auth:password-reset-request-error",function(){console.log("auth:password-reset-request-error")}),o.$on("auth:password-reset-confirm-error",function(){console.log("auth:password-reset-confirm-error")}),o.$on("auth:password-reset-confirm-success",function(){console.log("auth:password-reset-confirm-success"),t.show({controller:"changePasswordModalCtrl",templateUrl:"modules/guest/_change_password.modal.html"})}),o.$on("auth:password-change-success",function(){console.log("auth:password-change-success")}),o.$on("auth:password-change-error",function(){console.log("auth:password-change-error")}),o.$on("auth:logout-success",function(){console.log("auth:logout-success")}),o.$on("auth:logout-error",function(){console.log("auth:logout-error")}),o.$on("auth:account-update-success",function(){console.log("auth:account-update-success")}),o.$on("auth:account-update-error",function(){console.log("auth:account-update-error")}),o.$on("auth:account-destroy-success",function(){console.log("auth:account-destroy-success")}),o.$on("auth:account-destroy-error",function(){console.log("auth:account-destroy-error")}),o.$on("auth:validation-success",function(){console.log("auth:validation-success")}),o.$on("auth:validation-error",function(){console.log("auth:validation-error")}),o.$on("auth:validation-expired",function(){console.log("auth:validation-expired")}),o.$on("auth:login-success",function(){console.log("auth:login-success")}),o.$on("auth:login-error",function(){console.log("auth:login-error")}),o.$on("auth:registration-email-success",function(){console.log("auth:registration-email-success")}),o.$on("auth:registration-email-error",function(){console.log("auth:registration-email-error")})}]).controller("changePasswordModalCtrl",["$scope","$mdDialog","$rootScope",function(o,t,e){o.updatePassword=function(o){e.updatePassword(o)},o.cancel=function(){t.hide()}}]),angular.module("valueMash").service("User",function(){var o={};return o}),angular.module("valueMash").service("Notifier",["$mdToast",function(o){var t={show:function(t){o.show(o.simple().content(t).position("top left").hideDelay(1e3))}};return t}]),angular.module("valueMash").service("API",["$http","$auth","Notifier","API_URL",function(o,t,e,a){var n=function(t){t=angular.extend({auth:!0,method:"",url:""},t);var e={method:t.method,url:a+"/"+t.url,data:t.data||null};return o(e)},l={getUsers:function(){return n({method:"GET",url:"users.json"})},getValues:function(){return n({method:"GET",url:"values.json"})}};return l}]),angular.module("valueMash").run(["$templateCache",function(o){o.put("modules/dashboard/dashboard.html",'<h2>Dashboard!</h2><md-button class="contact" ui-sref="layout_guest.login" aria-label="Log in"><md-tooltip>Contact Bob</md-tooltip>Log in</md-button>'),o.put("modules/layout/_layout_app_sidebar.html",'<md-toolbar class="md-whiteframe-z1"><h1>Sidebar</h1></md-toolbar><md-list><md-list-item><md-button ui-sref="layout_app.dashboard">Dashboard</md-button></md-list-item><md-list-item><md-button ui-sref="layout_app.users">Users</md-button></md-list-item><md-list-item><md-button ui-sref="layout_app.values">Values</md-button></md-list-item></md-list>'),o.put("modules/layout/layout_app.html",'<md-sidenav ui-view="sidebar" class="site-sidenav md-sidenav-left md-whiteframe-z2" md-component-id="left" md-is-locked-open="$mdMedia(\'gt-sm\')"></md-sidenav><div flex="" layout="column" tabindex="-1" role="main" class="md-whiteframe-z2"><md-toolbar layout="row" class="md-whiteframe-z1"><md-button class="menu" hide-gt-sm="" ng-click="ul.toggleList()" aria-label="Show User List">Menu</md-button><h1>Layout_app.html <i class="fa fa-user"></i></h1></md-toolbar><md-content flex="" id="content" ui-view=""><p>ui-view</p></md-content></div>'),o.put("modules/layout/layout_guest.html",'<div flex="" layout="column" tabindex="-1" role="main" class="md-whiteframe-z2"><md-toolbar layout="row" class="md-whiteframe-z1" layout-padding=""><h1>Layout guest - ENV: {{ ENV }}, API_URL: {{ API_URL }}</h1></md-toolbar><md-content id="content" ui-view="" layout-padding=""></md-content><md-content layout="row" id="footer" layout-padding=""><p>Footer.</p></md-content></div>'),o.put("modules/guest/_change_password.modal.html",'<md-dialog ng-style="{width: \'400px\'}" class="account-type-change-modal"><md-dialog-content class="sticky-container"><md-subheader class="md-sticky-no-effect"><div class="md-headline">Set new Password</div></md-subheader><div class="flex-container"><form name="resetPasswordForm" ng-submit="updatePassword(newPass)" novalidate="novalidate"><md-input-container><label>Password</label> <input ng-model="newPass.password" type="password" required="required"></md-input-container><md-input-container><label>Password Confirmation</label> <input ng-model="newPass.password_confirmation" type="password" required="required"></md-input-container><md-button ng-disabled="resetPasswordForm.$invalid" class="submit-btn md-raised md-primary">Submit</md-button></form></div></md-dialog-content><div layout="row" class="md-actions"><md-button ng-click="cancel()" type="button" class="md-primary">Cancel</md-button></div></md-dialog>'),o.put("modules/guest/login.html",'<h3>Login!</h3><pre>User: {{ user | json }}</pre><md-button ng-click="signOut()" ng-disabled="!user.signedIn">Sign out</md-button><md-content layout="row"><md-button ui-sref="layout_app.dashboard" aria-label="Log in" class="contact"><md-tooltip>Dashboard</md-tooltip>Go to Dashboard</md-button><md-button ng-click="modalTest($event)">Password change modal</md-button></md-content><form layout="row" name="loginForm" ng-submit="submitLogin(credentials)" novalidate="novalidate"><md-content layout-padding="layout-padding"><div layout="row"><md-input-container><label>Email</label> <input ng-model="credentials.email" required="required"></md-input-container><md-input-container><label>Password</label> <input ng-model="credentials.password" type="password" required="required"></md-input-container></div><md-button ng-disabled="loginForm.$invalid" class="submit-btn md-raised md-primary">Log In</md-button></md-content></form><form layout="row" name="signupForm" ng-submit="submitRegistration(signup)" novalidate="novalidate"><md-content layout-padding="layout-padding"><div layout="row"><md-input-container><label>Email</label> <input ng-model="signup.email" required="required"></md-input-container><md-input-container><label>Password</label> <input ng-model="signup.password" type="password" required="required"></md-input-container><md-input-container><label>Password Confirmation</label> <input ng-model="signup.password_confirmation" type="password" required="required"></md-input-container></div><md-button ng-disabled="signupForm.$invalid" class="submit-btn md-raised md-primary">Sign up</md-button></md-content></form><form layout="row" name="resetPassForm" ng-submit="requestPasswordReset(reset)" novalidate="novalidate"><md-content layout-padding="layout-padding"><div layout="row"><md-input-container><label>Email</label> <input ng-model="reset.email" required="required"></md-input-container></div><md-button ng-disabled="resetPassForm.$invalid" class="submit-btn md-raised md-primary">Request password reset</md-button></md-content></form>'),o.put("modules/user/user.html",'<h2>Users</h2><div ng-repeat="user in users" layout="row"><div layout-padding="layout-padding"><i ng-if="user.admin" class="fa fa-star"></i>{{ user.id }}</div><div layout-padding="layout-padding">{{ user.email }}</div><div layout-padding="layout-padding">{{ user.created_at }}</div></div>'),o.put("modules/value/value.html",'<h2>Values</h2><div ng-repeat="value in values" layout="row"><div layout-padding="layout-padding">{{ value.id }}</div><div layout-padding="layout-padding">{{ value.id }}</div><div layout-padding="layout-padding">{{ value.id }}</div></div><pre>{{ values | json }}</pre>')}]);